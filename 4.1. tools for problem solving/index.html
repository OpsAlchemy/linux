<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Overview - Linux Labs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Overview";
        var mkdocs_page_input_path = "4.1. tools for problem solving.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Linux Labs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">1. Core Utilities</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../1.%20core-utils/">Core Utilities Guide</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">2. Data Streams</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../2.%20data-streams/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../2.1.%20data-streams-practices/">Practices</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">3. Working as Root</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../3.%20working-as-root/">Working as Root</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">4. Tools for Problem Solving</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#1-introduction">1. Introduction:</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../4.2.%20more%20monitoring%20tools/">More Monitoring Tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../4.3.%20Hardware%20Exploration%20and%20System%20Stats/">System Stats</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../4.4.%20notes/">Extras</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Linux Labs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">4. Tools for Problem Solving</li>
      <li class="breadcrumb-item active">Overview</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h3 id="comprehensive-guide-to-the-top-command-in-linux"><strong>Comprehensive Guide to the <code>top</code> Command in Linux</strong><a class="headerlink" href="#comprehensive-guide-to-the-top-command-in-linux" title="Permanent link">&para;</a></h3>
<hr />
<h4 id="1-introduction"><strong>1. Introduction:</strong><a class="headerlink" href="#1-introduction" title="Permanent link">&para;</a></h4>
<p>The <code>top</code> command is a fundamental tool for real-time system monitoring in Linux. It provides a dynamic, continuously updating view of system resource usage, including CPU, memory, and process activity. Knowing how to interpret and manipulate <code>top</code> output is crucial for system administration, troubleshooting, and performance optimization.</p>
<hr />
<h3 id="2-starting-and-configuring-top"><strong>2. Starting and Configuring <code>top</code>:</strong><a class="headerlink" href="#2-starting-and-configuring-top" title="Permanent link">&para;</a></h3>
<h4 id="21-basic-command-usage"><strong>2.1 Basic Command Usage:</strong><a class="headerlink" href="#21-basic-command-usage" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>top<span class="w">                                  </span><span class="c1"># Start with default settings</span>
top<span class="w"> </span>-d<span class="w"> </span><span class="m">1</span><span class="w">                             </span><span class="c1"># Update every 1 second</span>
top<span class="w"> </span>-n<span class="w"> </span><span class="m">10</span><span class="w">                            </span><span class="c1"># Refresh 10 times and exit</span>
top<span class="w"> </span>-b<span class="w">                               </span><span class="c1"># Batch mode, suitable for logging</span>
top<span class="w"> </span>-b<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>toplog.txt<span class="w">              </span><span class="c1"># Save a single snapshot to a file</span>
top<span class="w"> </span>-u<span class="w"> </span>username<span class="w">                      </span><span class="c1"># Show processes for a specific user</span>
top<span class="w"> </span>-p<span class="w"> </span><span class="m">1234</span><span class="w">                          </span><span class="c1"># Monitor a specific process by PID</span>
</code></pre></div>

<ul>
<li><strong>Batch Mode (-b):</strong> Useful for logging or automated monitoring.</li>
<li><strong>Interval (-d):</strong> Set update interval (default is 3 seconds).</li>
</ul>
<hr />
<h3 id="3-deep-dive-into-top-interface"><strong>3. Deep Dive into <code>top</code> Interface:</strong><a class="headerlink" href="#3-deep-dive-into-top-interface" title="Permanent link">&para;</a></h3>
<h4 id="31-top-section-system-information"><strong>3.1 Top Section: System Information:</strong><a class="headerlink" href="#31-top-section-system-information" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="n">top</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">19</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">48</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">day</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">:</span><span class="mi">48</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="n">average</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w"> </span><span class="mf">0.00</span>
</code></pre></div>

<ul>
<li><strong>Current Time:</strong> System time at the top left.</li>
<li><strong>Uptime:</strong> How long the system has been running since the last reboot.</li>
<li><strong>Logged-In Users:</strong> Number of active users.</li>
<li><strong>Load Average:</strong> CPU load over 1, 5, and 15 minutes.</li>
</ul>
<h5 id="understanding-load-average"><strong>Understanding Load Average:</strong><a class="headerlink" href="#understanding-load-average" title="Permanent link">&para;</a></h5>
<ul>
<li><strong>Load Average Format:</strong> <code>1.00, 0.75, 0.50</code></li>
<li><strong>1 minute:</strong> Immediate system load.</li>
<li><strong>5 minutes:</strong> Short-term load.</li>
<li><strong>15 minutes:</strong> Long-term load.</li>
<li><strong>Interpretation:</strong></li>
<li>Load average of <code>1.00</code> on a <strong>single-core system</strong>: Full CPU utilization.</li>
<li>Load average of <code>4.00</code> on a <strong>quad-core system</strong>: Full utilization.</li>
<li><strong>Higher than the number of cores:</strong> CPU overload or I/O wait.</li>
</ul>
<hr />
<h4 id="32-task-and-process-summary"><strong>3.2 Task and Process Summary:</strong><a class="headerlink" href="#32-task-and-process-summary" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="n">Tasks</span><span class="o">:</span><span class="w"> </span><span class="mi">160</span><span class="w"> </span><span class="n">total</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">running</span><span class="o">,</span><span class="w"> </span><span class="mi">159</span><span class="w"> </span><span class="n">sleeping</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">stopped</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">zombie</span>
</code></pre></div>

<ul>
<li><strong>Total:</strong> Total number of active processes.</li>
<li><strong>Running:</strong> Currently active and using CPU.</li>
<li><strong>Sleeping:</strong> Idle or waiting processes.</li>
<li><strong>Stopped:</strong> Paused processes.</li>
<li><strong>Zombie:</strong> Defunct processes not yet removed from the process table.</li>
</ul>
<h5 id="zombie-process-handling"><strong>Zombie Process Handling:</strong><a class="headerlink" href="#zombie-process-handling" title="Permanent link">&para;</a></h5>
<ul>
<li><strong>Zombie Detection:</strong>
  <code>bash
  ps -l | grep Z</code></li>
<li><strong>Solution:</strong></li>
<li>Find the <strong>parent process (PPID)</strong> of the zombie.</li>
<li>Restart or kill the parent process to clean up zombies.</li>
</ul>
<hr />
<h4 id="33-cpu-usage"><strong>3.3 CPU Usage:</strong><a class="headerlink" href="#33-cpu-usage" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c">%Cpu(s):  1.0 us,  0.3 sy,  0.0 ni, 98.7 id,  0.3 wa,  0.0 hi,  0.0 si,  0.0 st</span>
</code></pre></div>

<ul>
<li><strong>us (User):</strong> Time spent on user processes.</li>
<li><strong>sy (System):</strong> Time spent on kernel operations.</li>
<li><strong>ni (Nice):</strong> Time spent on processes with altered priority.</li>
<li><strong>id (Idle):</strong> Time the CPU is not being used.</li>
<li><strong>wa (I/O Wait):</strong> Time the CPU waits for I/O operations.</li>
<li><strong>hi (Hardware Interrupts):</strong> Time spent handling hardware IRQs.</li>
<li><strong>si (Software Interrupts):</strong> Time spent on software IRQs.</li>
<li><strong>st (Steal):</strong> Time stolen by the hypervisor for other VMs.</li>
</ul>
<h5 id="key-interpretations"><strong>Key Interpretations:</strong><a class="headerlink" href="#key-interpretations" title="Permanent link">&para;</a></h5>
<ul>
<li><strong>High %us:</strong> CPU is busy with user processes.</li>
<li><strong>High %sy:</strong> Kernel processes are demanding CPU.</li>
<li><strong>High %wa:</strong> Disk I/O bottleneck.</li>
<li><strong>High %st:</strong> Virtual machine is not getting enough CPU resources.</li>
</ul>
<hr />
<h4 id="34-memory-and-swap-usage"><strong>3.4 Memory and Swap Usage:</strong><a class="headerlink" href="#34-memory-and-swap-usage" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>MiB Mem : 7937.7 total, 3898.7 free, 827.4 used, 3211.6 buff/cache
MiB Swap: 0.0 total, 0.0 free, 0.0 used. 6773.6 avail Mem
</code></pre></div>

<ul>
<li><strong>Total Memory:</strong> Total physical RAM available.</li>
<li><strong>Free Memory:</strong> Unused RAM.</li>
<li><strong>Used Memory:</strong> RAM actively utilized by processes.</li>
<li><strong>Buff/Cache:</strong> Memory reserved for file buffers and cache.</li>
<li><strong>Swap Usage:</strong> Memory swapped out to disk.</li>
</ul>
<h5 id="tips-for-monitoring-memory"><strong>Tips for Monitoring Memory:</strong><a class="headerlink" href="#tips-for-monitoring-memory" title="Permanent link">&para;</a></h5>
<ul>
<li><strong>High Buff/Cache:</strong> Indicates aggressive caching.</li>
<li><strong>High Swap Usage:</strong> Possible memory exhaustion.</li>
<li><strong>Low Available Memory:</strong> Potential for swapping.</li>
</ul>
<hr />
<h4 id="35-process-list"><strong>3.5 Process List:</strong><a class="headerlink" href="#35-process-list" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
2956 root 20 0 2194828 130552 59904 S 1.7 1.6 19:37.22 dockerd
</code></pre></div>

<ul>
<li><strong>PID:</strong> Process ID.</li>
<li><strong>USER:</strong> Process owner.</li>
<li><strong>PR (Priority):</strong> Scheduling priority.</li>
<li><strong>NI (Nice Value):</strong> User-defined priority.</li>
<li><strong>VIRT:</strong> Virtual memory size.</li>
<li><strong>RES:</strong> Resident memory in RAM.</li>
<li><strong>SHR:</strong> Shared memory.</li>
<li><strong>S (State):</strong> Running (R), Sleeping (S), Zombie (Z), Stopped (T).</li>
<li><strong>%CPU:</strong> Percentage of CPU usage.</li>
<li><strong>%MEM:</strong> Percentage of memory usage.</li>
<li><strong>TIME+:</strong> Total CPU time consumed.</li>
<li><strong>COMMAND:</strong> Executable or script name.</li>
</ul>
<hr />
<h3 id="4-interactive-commands-in-top"><strong>4. Interactive Commands in <code>top</code>:</strong><a class="headerlink" href="#4-interactive-commands-in-top" title="Permanent link">&para;</a></h3>
<h4 id="41-navigation-and-display-customization"><strong>4.1 Navigation and Display Customization:</strong><a class="headerlink" href="#41-navigation-and-display-customization" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Space:</strong> Refresh the display.</li>
<li><strong>q:</strong> Quit <code>top</code>.</li>
<li><strong>h:</strong> Display help.</li>
<li><strong>c:</strong> Toggle between command name and full command line.</li>
</ul>
<h4 id="42-sorting-and-filtering"><strong>4.2 Sorting and Filtering:</strong><a class="headerlink" href="#42-sorting-and-filtering" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>P:</strong> Sort by CPU usage.</li>
<li><strong>M:</strong> Sort by memory usage.</li>
<li><strong>T:</strong> Sort by time.</li>
<li><strong>R:</strong> Reverse the sort order.</li>
<li><strong>O:</strong> Choose a field to sort by.</li>
</ul>
<h4 id="43-process-management"><strong>4.3 Process Management:</strong><a class="headerlink" href="#43-process-management" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>k:</strong> Kill a process (enter PID).</li>
<li><strong>r:</strong> Renice a process (enter PID and new priority).</li>
<li><strong>x:</strong> Highlight the current sort field.</li>
<li><strong>z:</strong> Toggle color mode for better visibility.</li>
</ul>
<hr />
<h3 id="5-advanced-usage-and-scenarios"><strong>5. Advanced Usage and Scenarios:</strong><a class="headerlink" href="#5-advanced-usage-and-scenarios" title="Permanent link">&para;</a></h3>
<h4 id="51-monitoring-specific-user-processes"><strong>5.1 Monitoring Specific User Processes:</strong><a class="headerlink" href="#51-monitoring-specific-user-processes" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>top<span class="w"> </span>-u<span class="w"> </span>azureuser
</code></pre></div>

<ul>
<li>Use to focus on processes belonging to a single user.</li>
</ul>
<h4 id="52-tracking-a-high-load-process"><strong>5.2 Tracking a High-Load Process:</strong><a class="headerlink" href="#52-tracking-a-high-load-process" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>top<span class="w"> </span>-p<span class="w"> </span><span class="m">2956</span>
</code></pre></div>

<ul>
<li>Monitor a single process that is causing performance issues.</li>
</ul>
<h4 id="53-persistent-logging"><strong>5.3 Persistent Logging:</strong><a class="headerlink" href="#53-persistent-logging" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>top<span class="w"> </span>-b<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span><span class="w"> </span>-d<span class="w"> </span><span class="m">2</span><span class="w"> </span>&gt;<span class="w"> </span>top_log.txt
</code></pre></div>

<ul>
<li><strong>-b:</strong> Batch mode for non-interactive output.</li>
<li><strong>-n 5:</strong> Run 5 iterations.</li>
<li><strong>-d 2:</strong> Delay of 2 seconds between updates.</li>
</ul>
<h4 id="54-killing-high-cpu-processes-from-top"><strong>5.4 Killing High-CPU Processes from <code>top</code>:</strong><a class="headerlink" href="#54-killing-high-cpu-processes-from-top" title="Permanent link">&para;</a></h4>
<ul>
<li>Press <strong>k</strong>, enter the <strong>PID</strong>, and then <strong>9</strong> for a force kill (SIGKILL).</li>
<li>Example:
  <code>k
  Enter PID: 2956
  Signal (default is 15): 9</code></li>
</ul>
<hr />
<h3 id="6-best-practices"><strong>6. Best Practices:</strong><a class="headerlink" href="#6-best-practices" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Adjust Update Interval:</strong></li>
<li>Use <code>-d</code> to reduce CPU consumption of <code>top</code> itself.</li>
<li><strong>Sort Smartly:</strong></li>
<li>Use <code>P</code>, <code>M</code>, or <code>T</code> to quickly find resource-hogging processes.</li>
<li><strong>Batch Mode for Logging:</strong></li>
<li>Use <code>-b</code> to automate monitoring during critical periods.</li>
<li><strong>Kill Responsibly:</strong></li>
<li>Use <code>SIGTERM</code> first, then <code>SIGKILL</code> if unresponsive.</li>
<li><strong>Monitor Memory Trends:</strong></li>
<li>Check for swap usage spikes, which indicate memory pressure.</li>
</ul>
<hr />
<h3 id="7-summary"><strong>7. Summary:</strong><a class="headerlink" href="#7-summary" title="Permanent link">&para;</a></h3>
<p>The <code>top</code> command is essential for real-time performance monitoring in Linux. Understanding the interface and using interactive commands efficiently allows administrators to detect CPU, memory, and process issues promptly. By leveraging sorting, filtering, and process management features, <code>top</code> becomes an invaluable tool for system maintenance and troubleshooting.</p>
<h3 id="comprehensive-guide-to-memory-management-in-linux"><strong>Comprehensive Guide to Memory Management in Linux</strong><a class="headerlink" href="#comprehensive-guide-to-memory-management-in-linux" title="Permanent link">&para;</a></h3>
<hr />
<h4 id="1-introduction_1"><strong>1. Introduction:</strong><a class="headerlink" href="#1-introduction_1" title="Permanent link">&para;</a></h4>
<p>Efficient memory management is essential for maintaining system performance and stability. In Linux, memory-related issues can lead to performance degradation, including <strong>thrashing</strong>. This guide covers essential concepts, memory metrics, and practical commands for monitoring and managing memory.</p>
<hr />
<h3 id="2-key-concepts-in-memory-management"><strong>2. Key Concepts in Memory Management:</strong><a class="headerlink" href="#2-key-concepts-in-memory-management" title="Permanent link">&para;</a></h3>
<h4 id="21-thrashing"><strong>2.1 Thrashing:</strong><a class="headerlink" href="#21-thrashing" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Definition:</strong> A state where the system spends more time swapping data between RAM and disk than performing useful work.</li>
<li><strong>Cause:</strong> Insufficient RAM for the workload, leading to excessive use of swap.</li>
<li><strong>Symptoms:</strong></li>
<li>High CPU utilization due to I/O operations.</li>
<li>Disk activity light constantly on.</li>
<li>Slow or unresponsive applications.</li>
<li><strong>Solution:</strong> Increase RAM, optimize application memory usage, or reduce workload.</li>
</ul>
<hr />
<h3 id="3-essential-memory-metrics"><strong>3. Essential Memory Metrics:</strong><a class="headerlink" href="#3-essential-memory-metrics" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Total</strong></td>
<td>Total physical RAM available.</td>
</tr>
<tr>
<td><strong>Free</strong></td>
<td>Unallocated and available RAM.</td>
</tr>
<tr>
<td><strong>Used</strong></td>
<td>Memory actively used by processes.</td>
</tr>
<tr>
<td><strong>Buff/Cache</strong></td>
<td>Memory used for temporary storage (buffers and cache).</td>
</tr>
<tr>
<td><strong>Buffers</strong></td>
<td>Memory used for I/O buffering.</td>
</tr>
<tr>
<td><strong>Cache</strong></td>
<td>Memory used for caching frequently accessed data.</td>
</tr>
<tr>
<td><strong>Swap Total</strong></td>
<td>Total swap space available.</td>
</tr>
<tr>
<td><strong>Swap Used</strong></td>
<td>Swap space currently in use.</td>
</tr>
<tr>
<td><strong>Available</strong></td>
<td>Memory readily available for new processes.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="4-commands-to-monitor-memory-usage"><strong>4. Commands to Monitor Memory Usage:</strong><a class="headerlink" href="#4-commands-to-monitor-memory-usage" title="Permanent link">&para;</a></h3>
<h4 id="41-free-check-memory-usage"><strong>4.1 <code>free</code>: Check Memory Usage</strong><a class="headerlink" href="#41-free-check-memory-usage" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>free<span class="w"> </span>-h<span class="w">                              </span><span class="c1"># Human-readable format</span>
free<span class="w"> </span>-m<span class="w">                              </span><span class="c1"># Memory in MB</span>
free<span class="w"> </span>-g<span class="w">                              </span><span class="c1"># Memory in GB</span>
</code></pre></div>

<p><strong>Example Output:</strong></p>
<div class="codehilite"><pre><span></span><code>              total        used        free      shared  buff/cache   available
Mem:          7.7G        1.2G        3.9G        212M        2.6G        5.7G
Swap:         2.0G        0.0G        2.0G
</code></pre></div>

<ul>
<li><strong>Total:</strong> Total system RAM.</li>
<li><strong>Used:</strong> Memory in active use.</li>
<li><strong>Free:</strong> Completely unused memory.</li>
<li><strong>Buff/Cache:</strong> Memory used by the kernel for buffers and cache.</li>
<li><strong>Available:</strong> Estimated memory available for new processes.</li>
</ul>
<hr />
<h4 id="42-vmstat-detailed-memory-and-swap-statistics"><strong>4.2 <code>vmstat</code>: Detailed Memory and Swap Statistics</strong><a class="headerlink" href="#42-vmstat-detailed-memory-and-swap-statistics" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>vmstat<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w">                           </span><span class="c1"># Update every 1 second, 5 times</span>
</code></pre></div>

<p><strong>Example Output:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">proc</span><span class="nv">s</span><span class="w"> </span><span class="o">-----------</span><span class="nv">memory</span><span class="o">----------</span><span class="w"> </span><span class="o">---</span><span class="nv">swap</span><span class="o">--</span><span class="w"> </span><span class="o">-----</span><span class="nv">io</span><span class="o">----</span><span class="w"> </span><span class="o">-</span><span class="nv">system</span><span class="o">--</span><span class="w"> </span><span class="o">------</span><span class="nv">cpu</span><span class="o">-----</span>
<span class="w"> </span><span class="nf">r</span><span class="w">  </span><span class="nv">b</span><span class="w">   </span><span class="nv">swpd</span><span class="w">   </span><span class="nv">free</span><span class="w">   </span><span class="nv">buff</span><span class="w">  </span><span class="nv">cache</span><span class="w">   </span><span class="nb">si</span><span class="w">   </span><span class="nv">so</span><span class="w">    </span><span class="nv">bi</span><span class="w">    </span><span class="nv">bo</span><span class="w">   </span><span class="nv">in</span><span class="w">   </span><span class="nb">cs</span><span class="w"> </span><span class="nv">us</span><span class="w"> </span><span class="nv">sy</span><span class="w"> </span><span class="nv">id</span><span class="w"> </span><span class="nv">wa</span><span class="w"> </span><span class="nv">st</span>
<span class="w"> </span><span class="err">1</span><span class="w">  </span><span class="err">0</span><span class="w">      </span><span class="err">0</span><span class="w"> </span><span class="err">3987628</span><span class="w"> </span><span class="err">652332</span><span class="w"> </span><span class="err">2419560</span><span class="w">   </span><span class="err">0</span><span class="w">    </span><span class="err">0</span><span class="w">     </span><span class="err">2</span><span class="w">     </span><span class="err">4</span><span class="w">   </span><span class="err">42</span><span class="w">   </span><span class="err">60</span><span class="w">  </span><span class="err">1</span><span class="w">  </span><span class="err">0</span><span class="w"> </span><span class="err">99</span><span class="w">  </span><span class="err">0</span><span class="w">  </span><span class="err">0</span>
</code></pre></div>

<ul>
<li><strong>swpd:</strong> Swap used.</li>
<li><strong>free:</strong> Unused RAM.</li>
<li><strong>buff:</strong> Buffer memory.</li>
<li><strong>cache:</strong> Cached data.</li>
<li><strong>si/so:</strong> Swap in and swap out (pages per second).</li>
<li><strong>bi/bo:</strong> Blocks in/out (I/O operations).</li>
<li><strong>us/sy/id/wa:</strong> CPU utilization (user, system, idle, I/O wait).</li>
</ul>
<hr />
<h4 id="43-top-real-time-memory-monitoring"><strong>4.3 <code>top</code>: Real-Time Memory Monitoring</strong><a class="headerlink" href="#43-top-real-time-memory-monitoring" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>top<span class="w">                                  </span><span class="c1"># Start real-time monitoring</span>
</code></pre></div>

<ul>
<li><strong>Press <code>M</code>:</strong> Sort processes by memory usage.</li>
<li><strong>Press <code>1</code>:</strong> Show per-CPU usage.</li>
<li><strong>Press <code>h</code>:</strong> Display help for more commands.</li>
</ul>
<hr />
<h4 id="44-smem-display-memory-usage-per-process"><strong>4.4 <code>smem</code>: Display Memory Usage per Process</strong><a class="headerlink" href="#44-smem-display-memory-usage-per-process" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>smem
smem<span class="w"> </span>-r<span class="w">                               </span><span class="c1"># Sort by memory usage</span>
smem<span class="w"> </span>-u<span class="w">                               </span><span class="c1"># Show memory usage by user</span>
smem<span class="w"> </span>-t<span class="w">                               </span><span class="c1"># Display total memory usage</span>
</code></pre></div>

<ul>
<li><strong>PSS (Proportional Set Size):</strong> Portion of memory shared with other processes.</li>
<li><strong>USS (Unique Set Size):</strong> Memory unique to the process.</li>
</ul>
<hr />
<h4 id="45-ps-list-processes-with-memory-usage"><strong>4.5 <code>ps</code>: List Processes with Memory Usage</strong><a class="headerlink" href="#45-ps-list-processes-with-memory-usage" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>ps<span class="w"> </span>aux<span class="w"> </span>--sort<span class="o">=</span>-%mem<span class="w">                   </span><span class="c1"># Sort processes by memory usage</span>
ps<span class="w"> </span>-eo<span class="w"> </span>pid,user,%mem,rss,cmd<span class="w"> </span>--sort<span class="o">=</span>-%mem<span class="w"> </span><span class="p">|</span><span class="w"> </span>head
</code></pre></div>

<ul>
<li><strong>%MEM:</strong> Percentage of RAM used by the process.</li>
<li><strong>RSS:</strong> Resident Set Size (physical memory).</li>
</ul>
<hr />
<h4 id="46-pmap-memory-map-of-a-process"><strong>4.6 <code>pmap</code>: Memory Map of a Process</strong><a class="headerlink" href="#46-pmap-memory-map-of-a-process" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>pmap<span class="w"> </span>-x<span class="w"> </span>&lt;PID&gt;<span class="w">                         </span><span class="c1"># Show detailed memory map</span>
pmap<span class="w"> </span>-d<span class="w"> </span>&lt;PID&gt;<span class="w">                         </span><span class="c1"># Summary of memory usage</span>
</code></pre></div>

<p><strong>Example:</strong></p>
<div class="codehilite"><pre><span></span><code>pmap<span class="w"> </span>-x<span class="w"> </span><span class="m">1234</span>
</code></pre></div>

<ul>
<li>Shows virtual memory usage, resident memory, and shared memory.</li>
</ul>
<hr />
<h3 id="5-monitoring-buffers-and-cache"><strong>5. Monitoring Buffers and Cache:</strong><a class="headerlink" href="#5-monitoring-buffers-and-cache" title="Permanent link">&para;</a></h3>
<h4 id="51-viewing-buffers-and-cache-usage"><strong>5.1 Viewing Buffers and Cache Usage:</strong><a class="headerlink" href="#51-viewing-buffers-and-cache-usage" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>cat<span class="w"> </span>/proc/meminfo<span class="w">                     </span><span class="c1"># Detailed memory statistics</span>
grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;Mem|Cache|Buffers&#39;</span><span class="w"> </span>/proc/meminfo
</code></pre></div>

<ul>
<li><strong>Cached:</strong> Data cached in RAM.</li>
<li><strong>Buffers:</strong> Data held temporarily during I/O operations.</li>
<li><strong>Active/Inactive:</strong> Recently used (active) vs. older data (inactive).</li>
</ul>
<hr />
<h4 id="52-clearing-buffers-and-cache"><strong>5.2 Clearing Buffers and Cache:</strong><a class="headerlink" href="#52-clearing-buffers-and-cache" title="Permanent link">&para;</a></h4>
<p><strong>Warning:</strong> Clearing cache may cause performance degradation as cached data must be reloaded.</p>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>sync<span class="p">;</span><span class="w"> </span>sudo<span class="w"> </span>sysctl<span class="w"> </span>-w<span class="w"> </span>vm.drop_caches<span class="o">=</span><span class="m">3</span>
</code></pre></div>

<ul>
<li><strong>1:</strong> Drop page cache.</li>
<li><strong>2:</strong> Drop slab objects.</li>
<li><strong>3:</strong> Drop both page cache and slab objects.</li>
</ul>
<hr />
<h3 id="6-swap-management"><strong>6. Swap Management:</strong><a class="headerlink" href="#6-swap-management" title="Permanent link">&para;</a></h3>
<h4 id="61-checking-swap-usage"><strong>6.1 Checking Swap Usage:</strong><a class="headerlink" href="#61-checking-swap-usage" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>swapon<span class="w"> </span>-s<span class="w">                             </span><span class="c1"># Show swap usage summary</span>
free<span class="w"> </span>-h<span class="w">                               </span><span class="c1"># Check swap usage</span>
</code></pre></div>

<h4 id="62-enabling-swap"><strong>6.2 Enabling Swap:</strong><a class="headerlink" href="#62-enabling-swap" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>swapon<span class="w"> </span>/swapfile
</code></pre></div>

<h4 id="63-disabling-swap"><strong>6.3 Disabling Swap:</strong><a class="headerlink" href="#63-disabling-swap" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>swapoff<span class="w"> </span>/swapfile
</code></pre></div>

<h4 id="64-add-a-new-swap-file"><strong>6.4 Add a New Swap File:</strong><a class="headerlink" href="#64-add-a-new-swap-file" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>fallocate<span class="w"> </span>-l<span class="w"> </span>1G<span class="w"> </span>/swapfile<span class="w">        </span><span class="c1"># Create 1GB swap file</span>
sudo<span class="w"> </span>chmod<span class="w"> </span><span class="m">600</span><span class="w"> </span>/swapfile<span class="w">              </span><span class="c1"># Secure the swap file</span>
sudo<span class="w"> </span>mkswap<span class="w"> </span>/swapfile<span class="w">                 </span><span class="c1"># Set up swap space</span>
sudo<span class="w"> </span>swapon<span class="w"> </span>/swapfile<span class="w">                 </span><span class="c1"># Enable swap</span>
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;/swapfile none swap sw 0 0&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/etc/fstab<span class="w">  </span><span class="c1"># Persist swap</span>
</code></pre></div>

<hr />
<h3 id="7-fifo-buffers-named-pipes"><strong>7. FIFO Buffers (Named Pipes):</strong><a class="headerlink" href="#7-fifo-buffers-named-pipes" title="Permanent link">&para;</a></h3>
<h4 id="71-creating-and-using-named-pipes"><strong>7.1 Creating and Using Named Pipes:</strong><a class="headerlink" href="#71-creating-and-using-named-pipes" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>mkfifo<span class="w"> </span>mypipe<span class="w">                        </span><span class="c1"># Create a named pipe</span>
lsblk<span class="w"> </span>-i<span class="w"> </span>&gt;<span class="w"> </span>mypipe<span class="w">                    </span><span class="c1"># Write output to the pipe</span>
cat<span class="w"> </span>mypipe<span class="w">                           </span><span class="c1"># Read the content from the pipe</span>
</code></pre></div>

<ul>
<li><strong>FIFO:</strong> First In, First Out; data comes out in the same order it was written.</li>
<li><strong>Use Case:</strong> Transfer data between processes or scripts.</li>
</ul>
<hr />
<h3 id="8-advanced-memory-monitoring"><strong>8. Advanced Memory Monitoring:</strong><a class="headerlink" href="#8-advanced-memory-monitoring" title="Permanent link">&para;</a></h3>
<h4 id="81-memory-leak-detection"><strong>8.1 Memory Leak Detection:</strong><a class="headerlink" href="#81-memory-leak-detection" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>valgrind<span class="w"> </span>--leak-check<span class="o">=</span>full<span class="w"> </span>./myapp<span class="w">   </span><span class="c1"># Check for memory leaks</span>
</code></pre></div>

<h4 id="82-analyzing-page-faults"><strong>8.2 Analyzing Page Faults:</strong><a class="headerlink" href="#82-analyzing-page-faults" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>vmstat<span class="w"> </span>-s<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;page&quot;</span>
</code></pre></div>

<ul>
<li><strong>Page faults:</strong> Occur when a process accesses data not currently in RAM.</li>
</ul>
<hr />
<h3 id="9-best-practices"><strong>9. Best Practices:</strong><a class="headerlink" href="#9-best-practices" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Monitor Regularly:</strong> Regular checks help spot memory leaks and usage spikes.</li>
<li><strong>Clear Cache Judiciously:</strong> Only clear cache if absolutely necessary.</li>
<li><strong>Optimize Swap Usage:</strong> Ensure swap usage is not excessive, as it can slow down the system.</li>
<li><strong>Check Logs:</strong> Memory-related issues often manifest as errors in system logs.</li>
<li><strong>Use Swap Wisely:</strong> Keep swap usage to a minimum to avoid thrashing.</li>
</ul>
<hr />
<h3 id="10-summary"><strong>10. Summary:</strong><a class="headerlink" href="#10-summary" title="Permanent link">&para;</a></h3>
<p>Effective memory management ensures system stability and optimal performance. Monitoring tools like <code>free</code>, <code>vmstat</code>, <code>smem</code>, <code>ps</code>, and <code>pmap</code> provide comprehensive insights into RAM and swap usage. Understanding how to manage buffers, cache, and swap is crucial for troubleshooting memory-related issues.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../3.%20working-as-root/" class="btn btn-neutral float-left" title="Working as Root"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../4.2.%20more%20monitoring%20tools/" class="btn btn-neutral float-right" title="More Monitoring Tools">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../3.%20working-as-root/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../4.2.%20more%20monitoring%20tools/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
